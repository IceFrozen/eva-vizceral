<html>
  <head>
    <script src="./dist/vizceral.js"></script>
      <link rel="stylesheet" type="text/css" href="./dist/app.css" />
<script>
      
  var testView = new Vizceral.EvaDataNode(Math.random(),"test1")    // 创建节点1 入口点
  var testView2 = new Vizceral.EvaDataNode(Math.random(),"test2")    //创建节点2
  var testView3 = new Vizceral.EvaDataNode(Math.random(),"test3")    //创建节点3
  var testView4 = new Vizceral.EvaDataNode(Math.random(),"test4")    //创建节点4
  var testView5 = new Vizceral.EvaDataNode(Math.random(),"test5")    //创建节点4
  var testView6 = new Vizceral.EvaDataNode(Math.random(),"test6")    //创建节点4
  //创建节点链接
  // 
  testView2.setClass("danger")  // 目前只支持三种 danger normal warnning
  // 节点2 链接节点4 3 4 6 
  //设置流量数 setDetail
  //创建 createNotices 链接说明 第二个参数   0，1，2，3    3不显示任何图标只有说明 第三个参数 链接地址
  testView2.connectAndGetConnetion(testView4).setDetail("danger",10).createNotices("test title 1",0,"http://www.baidu.com")    
  testView2.connectAndGetConnetion(testView3,{"danger":10,"normal":10}).createNotices("test title 1test title 1test title 1test title 1",1) //节点2链接节点3
  testView2.connectAndGetConnetion(testView5,{"danger":10,"normal":10}).createNotices("test title 1",2) //节点2链接节点3
  testView2.connectAndGetConnetion(testView6,{"danger":10,"normal":10}).createNotices("test title 1",3) //节点2链接节点3
  // 设置节点类型
  testView.setNodeType('users')
  testView2.setNodeType('service')
  testView3.setNodeType('storage')
  testView5.setNodeType('pipe')
  testView6.setNodeType('azure')



  testView.connectAndGetConnetion(testView2) //节点1链接节点2
          .createNotices("test title 1",4)   // 通知名 通知级别 是否有链接
//          .createNotices("test title 2",2,"http://www.baidu.com")
          // 设置流向图 数量
          .setDetail("danger",30)
          .setDetail("normal",30)
          .setDetail("warning",30)

  var region
  function run () {
   region = new Vizceral.EvaRegion(document.getElementById('viz')) 
      region.on("objectHighlighted",function(type,nodeOrConnection,navtiveNode) {
        if(type == "connection") {
            console.log("this is a  conenction")
            console.log(type,nodeOrConnection,navtiveNode)
            console.log("navtiveNode showNotices")
            console.log("nodeOrConnection is EvaConnection",nodeOrConnection)
        }
        if(type == "node") {
            console.log("this is a node")
            console.log(type,nodeOrConnection,navtiveNode)
            console.log("nodeOrConnection is evaNode",nodeOrConnection)
        }
        if(type == "cancel"){
            console.log("this is a node")
            console.log(type,nodeOrConnection,navtiveNode)
            console.log("nodeOrConnection is null",nodeOrConnection)
        }
     })
     region.setRootLevels(testView).show()
    // 只有这两部操作完成之后，EvaDataNode的属性变化才会被监听到
       // var node = region.getNodeByNodeId(testView.id)
       // console.log(testView.id)

      setTimeout(function(){
      // 以下步骤自动刷新视图
        var c = region.getNodeByNodeId(testView2.id)
        //c.setClass("danger")  //设置变化
        //c.setNodeType("user")
        //c.setHightLight(true)     // 设置高亮
         testView.showDetail('arc')
        var node = region.getNodeByNodeId(testView3.id)
        // 动态链接
        // node.connectAndGetConnetion(testView4,{"danger":1000,"normal":2000})
        //   .createNotices("test title 3",1)   // 通知名 通知级别 是否有链接 //新增节点
        setTimeout(function(){
            console.log("============")
           //c.setHightLight(false)     // 取消高亮
        },3000)
      },10000)

      }

      
</script>
</head>
  <body onload='run()'>
    <div id="viz">
     <!--   <canvas id='vizceral'></canvas> 
       <div class="vizceral-notice"></div> -->
    </div>
   
  </body>
</html>